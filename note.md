# ポケモンスリープ 食材備蓄管理＆料理計画アプリ（仮）概要

## 1. アプリの目的

ユーザーが「どの料理」を「何回」作りたいか（例：次週のイベントのために「煉獄コーンキーマカレー」を 15 回分確保したい、など）を指定した際に、必要な食材の総数を計算・可視化する。
手持ちポケモンの個体値や詳細なおてつだい能力の計算、および現在の自分の在庫管理は行わない。

## 2. 前提条件・ゲーム仕様詳細（ドメイン知識）

### 2.1. 料理システム

- **食事回数**: 1 日 3 回（朝・昼・晩）。
- **鍋の容量**: 一度の料理に使用できる食材の最大数。
  - 基本的には必須食材が足りていれば料理は成立する。
  - ただし、鍋の容量を超えて食材を入れることはできないため、料理ごとの必要食材数が鍋容量以下であるかどうかのチェックは必要（オプション）。
- **レシピの種類**:
  - 「カレー・シチュー」「サラダ」「ドリンク・デザート」の 3 カテゴリがある。
  - 各料理には「必須食材」とその「要求数」が設定されている。

### 2.2. インベントリ（食材バッグ）

- **容量上限**: プレイヤーが持てる食材の総数には上限がある。現在上限は 800。これを基準にユーザーが入力できるようにはしたい。
- **管理の必要性**: 料理を計画的に行わないとすぐに上限に達するため、どの食材を優先して集め、消費するかの管理が必要。

## 3. アプリの機能要件

### 3.1. ユーザー入力・データ管理

1.  **計画（プラン）管理**:
    - ユーザーは料理の計画を複数保存し、切り替えて利用できる（例：「来週のイベント用」「平常時用」など）。
    - 機能: 新規作成、名前変更、削除、プランの切り替え。
    - アプリ起動時には、前回選択していたプラン、またはデフォルトのプランを表示する。
2.  **料理設定（カウンター UI）**:
    - **カテゴリ選択タブ**: カレー・シチュー / サラダ / ドリンク・デザート の 3 つを切り替えるタブを上部に配置。
      - ゲーム内では週ごとに 1 つのカテゴリが決まるため、ユーザーはまずタブでカテゴリを選ぶ。
      - **注意**: 計画ごとに「選択中のカテゴリ」も保存されることが望ましい。
    - **料理一覧表示**: 選択中のカテゴリに属する料理のみをカード形式で一覧表示する。
    - 各料理カードに「+ / -」ボタンと回数入力欄を設置。
    - ユーザーはこのボタンで「これを作りたい回数」を直接増減させる。
3.  **食材バッグ上限編集**:
    - プレイヤーが持てる食材の総数には上限がある。現在上限は 800。これをデフォルト値とする。ユーザーが入力できるようにはしたい。9 割以上のユーザーは変更する必要がないと思うので操作メニューとしては目立たないところにあれば良い。

### 3.2. 計算機能

- **必要数算出**: 目標回数分の必須食材数を計算。
- **容量チェック**:
  - 算出された必要総数が、設定されたバッグ上限を超えていないかチェックする。

### 3.3. 出力・UI

- **必要総数リスト（リアルタイム更新）**:
  - 料理カウンターの操作に合わせて、即座に必要な食材の総数を再計算し表示する。
- **容量警告**:
  - 総数がバッグ容量を超えている場合、警告を表示する。

## 4. 技術スタック・データ永続化方針

- **データ保存**:
  - サーバーサイドデータベース（DB）は使用しない。
  - 全てのユーザーデータ（プラン設定、料理名、回数、バッグ上限など）はブラウザの **LocalStorage** に保存する。
  - **バージョン管理**: 将来的なデータ構造の変更（互換性のない改修）に備え、保存データにはバージョン情報を含める（例: キー名にバージョンを含める、またはデータ内に `version` フィールドを持たせる）。バージョン不一致時はマイグレーション処理を行うか、安全に初期化できるように設計する。
- **メリット**:
  - ユーザー登録やログインが不要で、URL にアクセスするだけですぐに利用開始できる。
  - サーバーコストがかからず、静的ホスティング（Vercel, GitHub Pages など）のみで運用可能。
  - オフラインでも動作する。
- **制約事項**:
  - ブラウザのキャッシュクリアやシークレットモード終了でデータが消える。
  - 異なるデバイス（PC とスマホなど）間でデータの同期はできない（今回の要件では許容とする）。
